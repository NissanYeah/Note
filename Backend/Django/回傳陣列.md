# Django 要如何回傳JSON陣列？

需求：資料庫中有許多員工的資料，包含員工編號、名稱、職稱、到職日...等資料，現在想要回傳只有「名稱」的JSON陣列

```js
['員工1','員工2','員工3','員工4','員工5']
```

## 設定urls

```py
from django.contrib import admin
from django.urls import include, path
from rest_framework import renderers
from course import views

staff_list = views.StaffViewSet.as_view({
    'get': 'list' #設定對應action
},renderer_classes=[renderers.StaticHTMLRenderer]) #加這個才能轉編碼

urlpatterns = [
    path('staff/',staff_list,name="staff_list"), #設定對應的action
    path('admin/', admin.site.urls),
    path('api-auth/', include('rest_framework.urls', namespace='rest_framework'))
]
```

## 設定views

```py
import json
from rest_framework import viewsets
from rest_framework.response import Response
from course.serializers import StaffSerializer
from course.models import Staff


class StaffViewSet(viewsets.ModelViewSet):
    """
    API endpoint that allows users to be viewed or edited.
    """
    def list(self, request, *args, **kwargs):
        queryset =  Staff.objects.values('name') #回傳一個 [{'name':'員工1'},{'name':'員工2'}]的list
        result = []
        for i in queryset:
            result.append(i['name']) #把name拿出來放到list中，['員工1','員工2']

        jsonResponse = json.dumps(result) #把['員工1','員工2']轉成json文字

        return Response(jsonResponse)
    
```

## 設定models

模型長這樣，基本不去改動他

```py
class Staff(models.Model):
    sid = models.CharField(primary_key=True, max_length=5)
    name = models.CharField(max_length=10)
    gender = models.CharField(max_length=1)
    team = models.CharField(max_length=3)
    position = models.IntegerField()
    title = models.CharField(max_length=20, blank=True, null=True)
    birthday = models.DateTimeField(blank=True, null=True)
    onboard = models.DateTimeField()

    class Meta:
        managed = False
        db_table = 'staff'
```